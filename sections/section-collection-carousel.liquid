<div class="collection-carousel__wrapper">
  <h2 class="collection-carousel__heading">
    {% if section.settings.collection_1 != blank %}
      {{ section.settings.collection_1.title }}
    {% elsif section.settings.heading != blank %}
      {{ section.settings.heading }}
    {% else %}
      {{ 'Collection' }}
    {% endif %}
  </h2>


  <div id="swiper-{{section.id}}" class="swiper mySwiper collection-carousel__cards-list">
    <div class="swiper-wrapper">
      {% if section.settings.collection_1.products.size > 0 %}
        {% for product in section.settings.collection_1.products %}
          <a href="{{ product.url }}" class="swiper-slide section-carousel__card">
            {% if product.featured_image %}
              <div class="section-carousel__card-media">
                {{
                  product.featured_image
                  | image_url: width: 800
                  | image_tag: loading: 'lazy', alt: product.title, class: 'section-carousel__card-image'
                }}
              </div>
            {% endif %}

            <div class="section-carousel__card-content">
              <div class="section-carousel__card-title">
                {{ product.title }}
              </div>

              <div class="section-carousel__card-price">
                {% render 'price', product_resource: product %}
              </div>

            </div>
          </a>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>

{% style %}

  root {
    --desktopPaddingTop: {{ section.settings.top_desktop }}px;
    --desktopPaddingBottom: {{ section.settings.bottom_desktop }}px;
  }

  .collection-carousel__wrapper {
    padding-top: var(--desktopPaddingTop, 0px);
    padding-bottom: var(--desktopPaddingBottom, 0px);
    max-width: 1200px;
    margin: 0 auto;
    }
    
    .collection-carousel__heading {
    font-size: 1.5rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 24px;
    color: var(--color-foreground, #000);
  }
    
    .collection-carousel__cards-list {
    width: 100%;
    display: flex;
    }

    /* Card */
    .section-carousel__card {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 350px !important;
    height: auto;
    text-decoration: none;
    color: inherit;
    background-color: var(--color-background, #fff);
    border: 1px solid var(--color-border, #e0e0e0);
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    /* Hover */
    .section-carousel__card:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
    }

    /* Image wrapper */
    .section-carousel__card-media {
    position: relative;
    width: 100%;
    height: 220px;
    overflow: hidden;
    background-color: #f5f5f5;
    }

    /* Image */
    .section-carousel__card-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    transition: transform 0.35s ease;
    }

    .section-carousel__card:hover .section-carousel__card-image {
    transform: scale(1.08);
    }

    /* Content */
    .section-carousel__card-content {
    display: flex;
    flex-direction: column;
    padding: 16px;
    gap: 8px;
    flex-grow: 1;
    }

    /* Title */
    .section-carousel__card-title {
    font-size: 1.05rem;
    font-weight: 600;
    line-height: 1.4;
    color: var(--color-foreground, #000);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    }

    /* Price */
    .section-carousel__card-price {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--color-foreground, #000);
    }

    /* Description */
    .section-carousel__card-description {
    font-size: 0.85rem;
    line-height: 1.5;
    color: var(--color-foreground-secondary, #666);
    margin-top: auto;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    }

    /* Responsive */
    @media (max-width: 768px) {
    .section-carousel__card-media {
        height: 180px;
    }

    .section-carousel__card-content {
        padding: 14px;
    }

    .section-carousel__card-title {
        font-size: 1rem;
    }
    }
{% endstyle %}

<script>
  document.addEventListener("DOMContentLoaded", ()=>{
    var swiper = new Swiper('#swiper-{{section.id}}', {
    slidesPerView: 3,
    spaceBetween: 30,
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
  });
  })
</script>

{% schema %}
{
  "name": "Collection Carousel",
  "tag": "section",
  "class": "collection-carousel",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "blocks": [
    {
      "type": "@theme"
    },
    {
      "type": "@app"
    },
    {
      "type": "_divider"
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Collection Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Collection Heading",
      "default": "Collection Carousel Heading"
    },
    {
      "type": "richtext",
      "id": "sub_heading",
      "label": "Collection Subheading"
    },
    {
      "type": "collection",
      "id": "collection_1",
      "label": "Add a Collection"
    },
    {
      "type": "range",
      "id": "product_count",
      "label": "Product Count",
      "min": 1,
      "max": 8,
      "step": 1,
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_pagination",
      "label": "Show Pagination",
      "default": true
    },
    {
      "type": "header",
      "content": "Section Spacing"
    },
    {
      "type": "range",
      "id": "bottom_desktop",
      "label": "Bottom Desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "range",
      "id": "botton_tablet",
      "label": "Bottom Tablet",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "range",
      "id": "botton_mobile",
      "label": "Bottom Mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "header",
      "content": "Inner Spacing Desktop Settings"
    },
    {
      "type": "range",
      "id": "top_desktop",
      "label": "Top Desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "header",
      "content": "Inner Spacing Tablet Settings"
    },
    {
      "type": "range",
      "id": "top_tablet",
      "label": "Top Tablet",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },

    {
      "type": "range",
      "id": "bottom_tablet",
      "label": "Bottom Tablet",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "header",
      "content": "Inner Spacing Mobile Settings"
    },
    {
      "type": "range",
      "id": "top_mobile",
      "label": "Top Mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "range",
      "id": "bottom_mobile",
      "label": "Bottom Mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Collection Product Carousel",
      "category": "Products"
    }
  ]
}
{% endschema %}
